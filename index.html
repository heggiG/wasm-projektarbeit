<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>WASM Picture Filters</title>
    </head>
    <body>
        <link rel="stylesheet" type="text/css" href="style.css" />
        <h1>Picture Filters in WASM with GO</h1>
        <input type="file" id="file-input" accept="image/png" />
        <div id="filters">
            <form id="filter-picker">
                <input type="radio" id="radio-sobel" value="sobel" name="filter" checked />
                <label for="radio-sobel">Sobel Filter</label>
                <input type="radio" id="radio-gaussean" value="gaussean" name="filter" />
                <label for="radio-gaussean">Gaussean Blur</label>
                <div id="color-shift-container">
                    <input type="radio" id="radio-color-shift" value="shift" name="filter" />
                    <label for="radio-color-shift">Color Shift</label>
                    <input type="color" id="color-shift-color" />
                    <label for="color-shift-color">Pick a color</label>
                    <input type="range" min="0" max="1" step="0.0001" id="shift-amount" />
                    <label for="shift-amount">Shift amount</label>
                </div>
                <div id="vignette-container">
                    <input type="radio" id="radio-vignette" value="vignette" name="filter">
                    <label for="radio-vignette">Vignette</label>
                    <input type="number" id="vignette-radius" placeholder="Radius"/>
                    <input type="number" id="vignette-center-x" placeholder="Center X"/>
                    <input type="number" id="vignette-center-y" placeholder="Center Y"/>
                    <input type="number" id="vignette-strength" placeholder="Strength"/>
                </div>
            </form>
            <button id="apply-button">Apply</button>
        </div>

        <div id="image-container">
            <img id="source-image" class="images" />
            <img id="target-image" class="images" />
        </div>
        <iframe src="./game/index.html" id="game-frame" width="1200" height="900"></iframe>
        <script src="wasm_exec.js"></script>
        <script src="script.js"></script>
        <script>
            const go = new Go();
            WebAssembly.instantiateStreaming(fetch("app.wasm"), go.importObject)
                .then((result) => {
                    go.run(result.instance);
                })
                .catch((err) => {
                    console.error(err);
                });
        </script>
    </body>
</html>
